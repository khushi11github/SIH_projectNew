<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin Panel</title>
	<style>
		body { font-family: Segoe UI, Arial, sans-serif; margin:20px; color:#0f172a; }
		.card { max-width:760px; margin:0 auto; border:1px solid #e5e7eb; border-radius:12px; padding:16px; background:#fff; }
		h1 { margin:0 0 12px; }
		label { display:block; margin-top:10px; font-weight:600; }
		input[type=file] { display:block; margin-top:6px; }
		button { margin-top:16px; padding:10px 14px; border:1px solid #1d4ed8; background:#2563eb; color:#fff; border-radius:8px; cursor:pointer; }
		.status { margin-top:10px; color:#334155; }
		.small { color:#6b7280; font-size:12px; }
		.success { color:#065f46; }
		.error { color:#b91c1c; }
		.files { margin-top:10px; }
	</style>
</head>
<body>
    <div class="card">
        <h1>Admin Panel</h1>
        <p class="small">Add or update teacher info directly in MongoDB.</p>
        <div class="row">
            <div>
                <label>Teacher ID (e.g., T1)</label>
                <input id="id" placeholder="T1" />
            </div>
            <div>
                <label>Name</label>
                <input id="name" placeholder="Dr. Smith" />
            </div>
        </div>
        <div class="row">
            <div>
                <label>Subjects (comma separated IDs)</label>
                <input id="subjects" placeholder="MATH,PHY" />
            </div>
            <div>
                <label>Primary Subjects (comma separated IDs)</label>
                <input id="primarySubjects" placeholder="MATH" />
            </div>
        </div>
        <div class="row">
            <div>
                <label>Availability (e.g., Mon:09:00-15:00,Tue:09:00-15:00)</label>
                <input id="availability" placeholder="Mon:09:00-15:00,Tue:09:00-15:00" />
            </div>
            <div>
                <label>Max Daily Hours</label>
                <input id="maxDailyHours" type="number" min="0" value="0" />
            </div>
        </div>
        <div class="row">
            <div>
                <label>Rating</label>
                <input id="rating" type="number" min="0" max="5" step="0.1" value="0" />
            </div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
            <button class="primary" id="saveBtn">Save Teacher</button>
            <span id="status" class="status"></span>
        </div>
    </div>
    <script>
        document.getElementById('saveBtn').onclick = async () => {
            const payload = {
                id: document.getElementById('id').value.trim(),
                name: document.getElementById('name').value.trim(),
                subjects: document.getElementById('subjects').value.trim(),
                primarySubjects: document.getElementById('primarySubjects').value.trim(),
                availability: document.getElementById('availability').value.trim(),
                maxDailyHours: Number(document.getElementById('maxDailyHours').value || 0),
                rating: Number(document.getElementById('rating').value || 0)
            };
            const status = document.getElementById('status');
            status.textContent = 'Saving...';
            const res = await fetch('/api/admin/teachers', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            }).then(r=>r.json()).catch(()=>({ error:'Failed' }));
            if (res && res.ok) status.textContent = 'Saved.'; else status.textContent = 'Failed: ' + (res.error||'');
        };
    </script>
</body>
</html>

